<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 0.66
Devel::Cover is copyright 2001-2010, Paul Johnson (pjcj@cpan.org)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: lib/Net/MQTT/Message.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">lib/Net/MQTT/Message.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c2">98.1%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L1">3</a></div></td><td></td><td><div>1283656</div><div>25</div><div>251</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">2</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L2">3</a></div></td><td></td><td><div>43</div><div>19</div><div>505</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">3</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package Net::MQTT::Message;</td></tr>
<tr><td class="h">4</td><td colspan="7"></td></tr><tr><td class="h">5</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># ABSTRACT: Perl module to represent MQTT messages</td></tr>
<tr><td class="h">6</td><td colspan="7"></td></tr><tr><td class="h">7 - 25</td><td colspan="6"></td><td class="s"><pre>=head1 SYNOPSIS

  use Net::MQTT::Constants;
  use Net::MQTT::Message;
  use IO::Socket::INET;
  my $socket = IO::Socket::INET-&gt;new(PeerAddr =&gt; &#39;127.0.0.1:1883&#39;);
  my $mqtt = Net::MQTT::Message-&gt;new(message_type =&gt; MQTT_CONNECT);
  print $socket $mqtt-&gt;bytes;

  my $tcp_payload = pack &#39;H*&#39;, &#39;300d000774657374696e6774657374&#39;;
  $mqtt = Net::MQTT::Message-&gt;new_from_bytes($tcp_payload);
  print &#39;Received: &#39;, $mqtt-&gt;string, &quot;\n&quot;;

=head1 DESCRIPTION

This module encapsulates a single MQTT message.  It uses subclasses to
represent specific message types.

=cut</pre></td></tr>
<tr><td class="h">26</td><td colspan="7"></td></tr><tr><td class="h">27</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L27">3</a></div></td><td></td><td><div>45</div><div>16</div><div>96</div></td><td class="s">use Net::MQTT::Constants qw/:all/;</td></tr>
<tr><td class="h">28</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L28">3</a></div></td><td></td><td><div>1627</div><div>39476</div><div>101</div></td><td class="s">use Module::Pluggable search_path =&gt; __PACKAGE__, require =&gt; 1;</td></tr>
<tr><td class="h">29</td><td colspan="7"></td></tr><tr><td class="h">30</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our %types;</td></tr>
<tr><td class="h">31</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">foreach (plugins()) {</td></tr>
<tr><td class="h">32</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $m = $_.&#39;::message_type&#39;;</td></tr>
<tr><td class="h">33</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;next unless (defined &amp;{$m}); # avoid super classes</td></tr>
<tr><td class="h">34</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $t = $_-&gt;message_type;</td></tr>
<tr><td class="h">35</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if (exists $types{$t}) {</td></tr>
<tr><td class="h">36</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;die &#39;Duplicate message_type number &#39;, $t, &quot;:\n&quot;,</td></tr>
<tr><td class="h">37</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;  &#39;, $_, &quot; and\n&quot;,</td></tr>
<tr><td class="h">38</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;  &#39;, $types{$t}, &quot;\n&quot;;</td></tr>
<tr><td class="h">39</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">40</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$types{$t} = $_;</td></tr>
<tr><td class="h">41</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">42</td><td colspan="7"></td></tr><tr><td class="h">43</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method C&lt;new( %parameters )&gt;</td></tr>
<tr><td class="h">44</td><td colspan="7"></td></tr><tr><td class="h">45</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Constructs an L&lt;Net::MQTT::Message&gt; object based on the given</td></tr>
<tr><td class="h">46</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">parameters.  The common parameter keys are:</td></tr>
<tr><td class="h">47</td><td colspan="7"></td></tr><tr><td class="h">48 - 80</td><td colspan="6"></td><td class="s"><pre>=over

=item C&lt;message_type&gt;

The message type field of the MQTT message.  This should be an integer
between 0 and 15 inclusive.  The module L&lt;Net::MQTT::Constants&gt;
provides constants that can be used for this value.  This parameter
is required.

=item C&lt;dup&gt;

The duplicate flag field of the MQTT message.  This should be either 1
or 0.  The default is 0.

=item C&lt;qos&gt;

The QoS field of the MQTT message.  This should be an integer between
0 and 3 inclusive.  The default is as specified in the spec or 0 (&quot;at
most once&quot;) otherwise.  The module L&lt;Net::MQTT::Constants&gt; provides
constants that can be used for this value.

=item C&lt;retain&gt;

The retain flag field of the MQTT message.  This should be either 1
or 0.  The default is 0.

=back

The remaining keys are dependent on the specific message type.  The
documentation for the subclasses for each message type list methods
with the same name as the required keys.

=cut</pre></td></tr>
<tr><td class="h">81</td><td colspan="7"></td></tr><tr><td class="h">82</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub new {</td></tr>
<tr><td class="h">83</td><td><div class="c3">43</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L83">43</a></div></td><td></td><td><div>32138</div></td><td class="s">&nbsp;&nbsp;my ($pkg, %p) = @_;</td></tr>
<tr><td class="h">84</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="lib-Net-MQTT-Message-pm--branch.html#L84">100</a></div></td><td></td><td></td><td></td><td><div>782</div></td><td class="s">&nbsp;&nbsp;my $type_pkg =</td></tr>
<tr><td class="h">85</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;exists $types{$p{message_type}} ? $types{$p{message_type}} : $pkg;</td></tr>
<tr><td class="h">86</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>2439</div></td><td class="s">&nbsp;&nbsp;bless { %p }, $type_pkg;</td></tr>
<tr><td class="h">87</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">88</td><td colspan="7"></td></tr><tr><td class="h">89</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method C&lt;new_from_bytes( $packed_bytes, [ $splice ] )&gt;</td></tr>
<tr><td class="h">90</td><td colspan="7"></td></tr><tr><td class="h">91</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Attempts to constructs an L&lt;Net::MQTT::Message&gt; object based on</td></tr>
<tr><td class="h">92</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">the given packed byte string.  If there are insufficient bytes, then</td></tr>
<tr><td class="h">93</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">undef is returned.  If the splice parameter is provided and true, then</td></tr>
<tr><td class="h">94</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">the processed bytes are removed from the scalar referenced by the</td></tr>
<tr><td class="h">95</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">$packed_bytes parameter.</td></tr>
<tr><td class="h">96</td><td colspan="7"></td></tr><tr><td class="h">97</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">98</td><td colspan="7"></td></tr><tr><td class="h">99</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub new_from_bytes {</td></tr>
<tr><td class="h">100</td><td><div class="c3">26</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L100">26</a></div></td><td></td><td><div>70941</div></td><td class="s">&nbsp;&nbsp;my ($pkg, $bytes, $splice) = @_;</td></tr>
<tr><td class="h">101</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>192</div></td><td class="s">&nbsp;&nbsp;my %p;</td></tr>
<tr><td class="h">102</td><td><div class="c3">26</div></td><td><div class="c3" title="T/F"><a href="lib-Net-MQTT-Message-pm--branch.html#L102">100</a></div></td><td></td><td></td><td></td><td><div>383</div></td><td class="s">&nbsp;&nbsp;return if (length $bytes &lt; 2);</td></tr>
<tr><td class="h">103</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>186</div></td><td class="s">&nbsp;&nbsp;my $offset = 0;</td></tr>
<tr><td class="h">104</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>810</div></td><td class="s">&nbsp;&nbsp;my $b = decode_byte($bytes, \$offset);</td></tr>
<tr><td class="h">105</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>299</div></td><td class="s">&nbsp;&nbsp;$p{message_type} = ($b&amp;0xf0) &gt;&gt; 4;</td></tr>
<tr><td class="h">106</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>218</div></td><td class="s">&nbsp;&nbsp;$p{dup} = ($b&amp;0x8)&gt;&gt;3;</td></tr>
<tr><td class="h">107</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>303</div></td><td class="s">&nbsp;&nbsp;$p{qos} = ($b&amp;0x6)&gt;&gt;1;</td></tr>
<tr><td class="h">108</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>203</div></td><td class="s">&nbsp;&nbsp;$p{retain} = ($b&amp;0x1);</td></tr>
<tr><td class="h">109</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>154</div></td><td class="s">&nbsp;&nbsp;my $length;</td></tr>
<tr><td class="h">110</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>201</div></td><td class="s">&nbsp;&nbsp;eval {</td></tr>
<tr><td class="h">111</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>746</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$length = decode_remaining_length($bytes, \$offset);</td></tr>
<tr><td class="h">112</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;};</td></tr>
<tr><td class="h">113</td><td><div class="c3">25</div></td><td><div class="c3" title="T/F"><a href="lib-Net-MQTT-Message-pm--branch.html#L113">100</a></div></td><td></td><td></td><td></td><td><div>6906</div></td><td class="s">&nbsp;&nbsp;return if ($@);</td></tr>
<tr><td class="h">114</td><td><div class="c3">23</div></td><td><div class="c3" title="T/F"><a href="lib-Net-MQTT-Message-pm--branch.html#L114">100</a></div></td><td></td><td></td><td></td><td><div>239</div></td><td class="s">&nbsp;&nbsp;if (length $bytes &lt; $offset+$length) {</td></tr>
<tr><td class="h">115</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return</td></tr>
<tr><td class="h">116</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">117</td><td><div class="c3">21</div></td><td><div class="c3" title="T/F"><a href="lib-Net-MQTT-Message-pm--branch.html#L117">100</a></div></td><td></td><td></td><td></td><td><div>273</div></td><td class="s">&nbsp;&nbsp;substr $_[1], 0, $offset+$length, &#39;&#39; if ($splice);</td></tr>
<tr><td class="h">118</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td></td><td><div>254</div></td><td class="s">&nbsp;&nbsp;$p{remaining} = substr $bytes, $offset, $length;</td></tr>
<tr><td class="h">119</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td></td><td><div>375</div></td><td class="s">&nbsp;&nbsp;my $self = $pkg-&gt;new(%p);</td></tr>
<tr><td class="h">120</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td></td><td><div>685</div></td><td class="s">&nbsp;&nbsp;$self-&gt;_parse_remaining();</td></tr>
<tr><td class="h">121</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td></td><td><div>652</div></td><td class="s">&nbsp;&nbsp;$self;</td></tr>
<tr><td class="h">122</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">123</td><td colspan="7"></td></tr><tr><td class="h">124</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L124">6</a></div></td><td></td><td><div>46</div></td><td class="s">sub _parse_remaining {</td></tr>
<tr><td class="h">125</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">126</td><td colspan="7"></td></tr><tr><td class="h">127</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method C&lt;message_type()&gt;</td></tr>
<tr><td class="h">128</td><td colspan="7"></td></tr><tr><td class="h">129</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Returns the message type field of the MQTT message.  The module</td></tr>
<tr><td class="h">130</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">L&lt;Net::MQTT::Constants&gt; provides a function, C&lt;message_type_string&gt;,</td></tr>
<tr><td class="h">131</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">that can be used to convert this value to a human readable string.</td></tr>
<tr><td class="h">132</td><td colspan="7"></td></tr><tr><td class="h">133</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">134</td><td colspan="7"></td></tr><tr><td class="h">135</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L135">4</a></div></td><td></td><td><div>88</div></td><td class="s">sub message_type { shift-&gt;{message_type} }</td></tr>
<tr><td class="h">136</td><td colspan="7"></td></tr><tr><td class="h">137</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method C&lt;dup()&gt;</td></tr>
<tr><td class="h">138</td><td colspan="7"></td></tr><tr><td class="h">139</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">The duplicate flag field of the MQTT message.</td></tr>
<tr><td class="h">140</td><td colspan="7"></td></tr><tr><td class="h">141</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">142</td><td colspan="7"></td></tr><tr><td class="h">143</td><td><div class="c3">84</div></td><td><div class="c3" title="T/F"><a href="lib-Net-MQTT-Message-pm--branch.html#L143">100</a></div></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L143">84</a></div></td><td></td><td><div>2521</div></td><td class="s">sub dup { shift-&gt;{dup} || 0 }</td></tr>
<tr><td class="h">144</td><td colspan="7"></td></tr><tr><td class="h">145</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method C&lt;qos()&gt;</td></tr>
<tr><td class="h">146</td><td colspan="7"></td></tr><tr><td class="h">147</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">The QoS field of the MQTT message.  The module</td></tr>
<tr><td class="h">148</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">L&lt;Net::MQTT::Constants&gt; provides a function, C&lt;qos_string&gt;, that</td></tr>
<tr><td class="h">149</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">can be used to convert this value to a human readable string.</td></tr>
<tr><td class="h">150</td><td colspan="7"></td></tr><tr><td class="h">151</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">152</td><td colspan="7"></td></tr><tr><td class="h">153</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub qos {</td></tr>
<tr><td class="h">154</td><td><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L154">94</a></div></td><td></td><td><div>711</div></td><td class="s">&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">155</td><td><div class="c3">94</div></td><td><div class="c3" title="T/F"><a href="lib-Net-MQTT-Message-pm--branch.html#L155">100</a></div></td><td></td><td></td><td></td><td><div>2246</div></td><td class="s">&nbsp;&nbsp;defined $self-&gt;{qos} ? $self-&gt;{qos} : $self-&gt;_default_qos</td></tr>
<tr><td class="h">156</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">157</td><td colspan="7"></td></tr><tr><td class="h">158</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _default_qos {</td></tr>
<tr><td class="h">159</td><td><div class="c3">36</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L159">36</a></div></td><td></td><td><div>866</div></td><td class="s">&nbsp;&nbsp;MQTT_QOS_AT_MOST_ONCE</td></tr>
<tr><td class="h">160</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">161</td><td colspan="7"></td></tr><tr><td class="h">162</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method C&lt;retain()&gt;</td></tr>
<tr><td class="h">163</td><td colspan="7"></td></tr><tr><td class="h">164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">The retain field of the MQTT message.</td></tr>
<tr><td class="h">165</td><td colspan="7"></td></tr><tr><td class="h">166</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">167</td><td colspan="7"></td></tr><tr><td class="h">168</td><td><div class="c3">84</div></td><td><div class="c3" title="T/F"><a href="lib-Net-MQTT-Message-pm--branch.html#L168">100</a></div></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L168">84</a></div></td><td></td><td><div>1968</div></td><td class="s">sub retain { shift-&gt;{retain} || 0 }</td></tr>
<tr><td class="h">169</td><td colspan="7"></td></tr><tr><td class="h">170</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method C&lt;remaining()&gt;</td></tr>
<tr><td class="h">171</td><td colspan="7"></td></tr><tr><td class="h">172</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">This contains a packed string of bytes with any of the payload of the</td></tr>
<tr><td class="h">173</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">MQTT message that was not parsed by these modules.  This should not</td></tr>
<tr><td class="h">174</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">be required for packets that strictly follow the standard.</td></tr>
<tr><td class="h">175</td><td colspan="7"></td></tr><tr><td class="h">176</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">177</td><td colspan="7"></td></tr><tr><td class="h">178</td><td><div class="c3">50</div></td><td><div class="c3" title="T/F"><a href="lib-Net-MQTT-Message-pm--branch.html#L178">100</a></div></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L178">50</a></div></td><td></td><td><div>1984</div></td><td class="s">sub remaining { shift-&gt;{remaining} || &#39;&#39; }</td></tr>
<tr><td class="h">179</td><td colspan="7"></td></tr><tr><td class="h">180</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _remaining_string {</td></tr>
<tr><td class="h">181</td><td><div class="c3">38</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L181">38</a></div></td><td></td><td><div>321</div></td><td class="s">&nbsp;&nbsp;my ($self, $prefix) = @_;</td></tr>
<tr><td class="h">182</td><td><div class="c3">38</div></td><td></td><td></td><td></td><td></td><td><div>482</div></td><td class="s">&nbsp;&nbsp;dump_string($self-&gt;remaining, $prefix);</td></tr>
<tr><td class="h">183</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">184</td><td colspan="7"></td></tr><tr><td class="h">185</td><td><div class="c3">12</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L185">12</a></div></td><td></td><td><div>128</div></td><td class="s">sub _remaining_bytes { shift-&gt;remaining }</td></tr>
<tr><td class="h">186</td><td colspan="7"></td></tr><tr><td class="h">187</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method C&lt;string([ $prefix ])&gt;</td></tr>
<tr><td class="h">188</td><td colspan="7"></td></tr><tr><td class="h">189</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Returns a summary of the message as a string suitable for logging.</td></tr>
<tr><td class="h">190</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">If provided, each line will be prefixed by the optional prefix.</td></tr>
<tr><td class="h">191</td><td colspan="7"></td></tr><tr><td class="h">192</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">193</td><td colspan="7"></td></tr><tr><td class="h">194</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub string {</td></tr>
<tr><td class="h">195</td><td><div class="c3">42</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L195">42</a></div></td><td></td><td><div>5986</div></td><td class="s">&nbsp;&nbsp;my ($self, $prefix) = @_;</td></tr>
<tr><td class="h">196</td><td><div class="c3">42</div></td><td><div class="c3" title="T/F"><a href="lib-Net-MQTT-Message-pm--branch.html#L196">100</a></div></td><td></td><td></td><td></td><td><div>539</div></td><td class="s">&nbsp;&nbsp;$prefix = &#39;&#39; unless (defined $prefix);</td></tr>
<tr><td class="h">197</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>238</div></td><td class="s">&nbsp;&nbsp;my @attr;</td></tr>
<tr><td class="h">198</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>597</div></td><td class="s">&nbsp;&nbsp;push @attr, qos_string($self-&gt;qos);</td></tr>
<tr><td class="h">199</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>502</div></td><td class="s">&nbsp;&nbsp;foreach (qw/dup retain/) {</td></tr>
<tr><td class="h">200</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>1236</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $bool = $self-&gt;$_;</td></tr>
<tr><td class="h">201</td><td><div class="c3">84</div></td><td><div class="c3" title="T/F"><a href="lib-Net-MQTT-Message-pm--branch.html#L201">100</a></div></td><td></td><td></td><td></td><td><div>912</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @attr, $_ if ($bool);</td></tr>
<tr><td class="h">202</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">203</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>1087</div></td><td class="s">&nbsp;&nbsp;my $r = $self-&gt;_remaining_string($prefix);</td></tr>
<tr><td class="h">204</td><td><div class="c3">42</div></td><td><div class="c3" title="T/F"><a href="lib-Net-MQTT-Message-pm--branch.html#L204">100</a></div></td><td></td><td></td><td></td><td><div>1237</div></td><td class="s">&nbsp;&nbsp;$prefix.message_type_string($self-&gt;message_type).</td></tr>
<tr><td class="h">205</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&#39;/&#39;.(join &#39;,&#39;, @attr).($r ? &#39; &#39;.$r : &#39;&#39;)</td></tr>
<tr><td class="h">206</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">207</td><td colspan="7"></td></tr><tr><td class="h">208</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method C&lt;bytes()&gt;</td></tr>
<tr><td class="h">209</td><td colspan="7"></td></tr><tr><td class="h">210</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Returns the bytes of the message suitable for writing to a socket.</td></tr>
<tr><td class="h">211</td><td colspan="7"></td></tr><tr><td class="h">212</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">213</td><td colspan="7"></td></tr><tr><td class="h">214</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub bytes {</td></tr>
<tr><td class="h">215</td><td><div class="c3">42</div></td><td></td><td></td><td><div class="c3"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L215">42</a></div></td><td></td><td><div>427</div></td><td class="s">&nbsp;&nbsp;my ($self) = shift;</td></tr>
<tr><td class="h">216</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>337</div></td><td class="s">&nbsp;&nbsp;my $o = &#39;&#39;;</td></tr>
<tr><td class="h">217</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>1233</div></td><td class="s">&nbsp;&nbsp;my $b =</td></tr>
<tr><td class="h">218</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;($self-&gt;message_type &lt;&lt; 4) | ($self-&gt;dup &lt;&lt; 3) |</td></tr>
<tr><td class="h">219</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($self-&gt;qos &lt;&lt; 1) | $self-&gt;retain;</td></tr>
<tr><td class="h">220</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>1286</div></td><td class="s">&nbsp;&nbsp;$o .= encode_byte($b);</td></tr>
<tr><td class="h">221</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>1167</div></td><td class="s">&nbsp;&nbsp;my $remaining = $self-&gt;_remaining_bytes;</td></tr>
<tr><td class="h">222</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>1236</div></td><td class="s">&nbsp;&nbsp;$o .= encode_remaining_length(length $remaining);</td></tr>
<tr><td class="h">223</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>331</div></td><td class="s">&nbsp;&nbsp;$o .= $remaining;</td></tr>
<tr><td class="h">224</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>1391</div></td><td class="s">&nbsp;&nbsp;$o;</td></tr>
<tr><td class="h">225</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">226</td><td colspan="7"></td></tr><tr><td class="h">227</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method C&lt;attributes()&gt;</td></tr>
<tr><td class="h">228</td><td colspan="7"></td></tr><tr><td class="h">229</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Returns list of attributes for this message type.</td></tr>
<tr><td class="h">230</td><td colspan="7"></td></tr><tr><td class="h">231</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">232</td><td colspan="7"></td></tr><tr><td class="h">233</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub attributes {</td></tr>
<tr><td class="h">234</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="lib-Net-MQTT-Message-pm--subroutine.html#L234">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;qw/message_type qos dup retain/</td></tr>
<tr><td class="h">235</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">236</td><td colspan="7"></td></tr><tr><td class="h">237</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
</table>
</body>
</html>
